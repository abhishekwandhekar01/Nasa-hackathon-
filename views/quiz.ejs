<%- include('partials/header', { user: user, active: 'missions' }) %>

<div class="container">
    <div class="mb-4">
        <div class="feature-card p-3">
            <h5>Today's Knowledge</h5>
            <p class="knowledge-paragraph"><%= typeof todaysKnowledge !== 'undefined' ? todaysKnowledge : '(No knowledge for today)' %></p>
        </div>
    </div>
    <div class="row justify-content-center">
        <div class="col-lg-10">
            <div class="feature-card">
                <h3 class="feature-title">Daily Space Quiz</h3>
                <p class="feature-description">Answer the questions below based on today's NASA data.</p>

                <form action="/submit-quiz" method="POST" class="mt-3 text-start">
                    <% questions.forEach(q => { %>
                        <div class="mb-4">
                            <label class="form-label"><strong><%= q.prompt %></strong></label>
                            <% if (q.type === 'text') { %>
                                <% if (q.image) { %>
                                    <div class="mb-2"><img src="<%= q.image %>" class="img-fluid rounded" alt="question image"></div>
                                <% } %>
                                <input type="text" class="form-control" name="<%= q.id %>" required>
                            <% } else if (q.type === 'mcq') { %>
                                <% if (q.image) { %>
                                    <div class="mb-2"><img src="<%= q.image %>" class="img-fluid rounded" alt="question image"></div>
                                <% } %>
                                <% q.options.forEach(opt => { %>
                                    <div class="form-check mb-2">
                                        <input class="form-check-input" type="radio" name="<%= q.id %>" id="<%= q.id + opt %>" value="<%= opt %>" required>
                                        <label class="form-check-label" for="<%= q.id + opt %>"><%= opt %></label>
                                    </div>
                                <% }) %>
                            <% } %>
                        </div>
                    <% }) %>

                    <button type="submit" class="btn btn-primary w-100">Submit Quiz</button>
                </form>
            </div>
        </div>
    </div>
    </div>
</div>

<%- include('partials/footer') %>